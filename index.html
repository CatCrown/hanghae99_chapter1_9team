<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<title>Title</title>

<head>

    <style>

        /*  폰트*/
        @font-face {
            font-family: 'yg-jalnan';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_four@1.2/JalnanOTF00.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        /*배경과 정렬들에 대한 고정값*/
        body {
            background-color: transparent;
            vertical-align: middle;
            height: 100vh;
        }

        .btn-outline-danger {
            vertical-align: middle;
            width: 100%;
            background-color: white;
            justify-content: center;
            flex-direction: row

        }

        /*게임을 시작하기 전 누르는 버튼*/
        .start {
            width: 400px;

            margin: auto;
        }

        .start > button {
            border: 4px solid #E8334FFF;
            box-shadow: 0 0 0 8px white;
            font-size: 50px;
            width: 400px;
            height: 400px;
            margin-top: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 10px;

        }

        /*폰트*/
        .table {
            font-family: 'yg-jalnan';
        }

        /*폰트*/
        .start {
            font-family: 'yg-jalnan';
        }

        /*배경의 배경 고정*/
        html {
            background: url("https://ifh.cc/g/gFppXw.jpg") no-repeat 50% 50% fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }

        /*배경*/
        .back {
            /*게임 배경 테두리*/
            border: 3px solid white;
            max-height: 2000px;
           /* 해상도 최솟값*/
            min-width: 994px;
            min-height: 655px;

            height: 60%;
            max-width: 1000px;
            width: 95%;

            background-image: url("https://ifh.cc/g/PXK8Ap.jpg");
            background-position: center;
            background-size: cover;
            margin: 50px auto 20px auto;
            display: none;
        }

        .playgame {
            height: 100%;
            align-items: center;
            flex-direction: column;
            display: flex;
            width: 100%;
            justify-content: center;
        }

        /*컴퓨터*/
        .Computer {
            display: flex;
<<<<<<< HEAD
            /*flex-direction: column;*/
            justify-content: center;
            /*align-items: center;*/
            margin-top: 100px;
            padding-top: 50px;

        <style type="text/css">
        div.question-box {
            margin: 10px 0 20px 0;
=======
            flex-direction: column;
            /*컴퓨터사진크기 퍼센트*/
            width: 30%;
            margin-top: 10%;
>>>>>>> 0c43b4794e7d6210b360a4119b86e525b7589219
        }

        .user {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-top: 10%;
        }


        /*유저*/
        .User > button {

        }
        /*.UserImg {*/
        /*    display: flex;*/
        /*    flex-direction: row;*/
        /*    justify-content: center;*/
        /*    align-items: center;*/
        /*    margin-top: 50px;*/


        /*    margin-top: 300px;*/
        }

        /*메세지창*/
        .msg {
            color: white;
            font-size: 100px;
            margin-bottom: 50px;
        }
        .WinLose{
            font-color:red;

        }

        .table {
           /* 버튼을 누르기 전에 히스토리가 안 보이게*/
            display: none;

            box-shadow: 0px 0px 5px 0px gray;
            font-size: 20px;
            background-color: #E8334F;
            text-shadow: 5px 5px 5px 5px black;
            color: #ffffff;
            width: 95%;
            max-width: 1000px;
            margin: auto;

            text-align: center;

            border: 2px solid white;
            border-collapse: collapse;
        }

        td,
        th {
            padding: 10px;
            border: 1px solid;}


    </style>
    <!--     시작할 때 바로 가위바위보 화면이 보여질 수 있도록-->

    <script>
        $(document).ready(function () {
            listing_user();
            listing_com();
        });
        // 컴퓨터와 유저의 가위,바위,보 각각의 넘버 비교
        // 이기면 p값에 2, 지면 p값에 3, 비기면 p값에 1을 부여
        function answer(num_com, num_user) {
            let win_count = 0;
            let p = 0;
            for (let i = 0; i < 3; i++) {

                if (num_com[i] == num_user[i]) {
                    p = 1;
                    win_count = 0;
                    result(${p,win_count});
                } else if (num_user[i] == 1 && num_com[i] == 3) {
                    p = 2;
                    win_count++;
                    result(${p,win_count});
                } else if (num_user[i] == 2 && num_com[i] == 1) {
                    p = 2;
                    win_count++;
                    result(${p,win_count});
                } else if (num_user[i] == 3 && num_com[i] == 2) {
                    p = 2;
                    win_count++;
                    result(${p,win_count});
                } else {
                    p = 3;
                    win_count = 0;
                    result(${p,win_count});
                }
            }
        }

        // answer에서 win_count와 p값을 받고 @app.return_post로 전달
        function result(p, win_count) {
            $.ajax({
                type: 'POST',
                url: '/rsp_log',
                data: {win_give: win_count, result_give: p},
                success: function (response) {
                    alert(response['msg'])
                    //window.location.reload()

                }
            });
        }

        //db(rsp_user)에서 image와 넘버 번호 모음을 가져온다
        function listing_user() {
            //$('#cards-box').empty()
            $.ajax({
                type: 'GET',
                url: '/rsp',
                data: {},
                success: function (response) {
                    let rows = response
                    for (let i = 0; i < rows.length; i++) {
                        let user_image = rows[i]['img_list_user']
                        let num_user = rows[i]['user_num']
                        let temp_html =``
                    temp_html= '<button onClick="answer(${num_user[i]})" type="button"><img width=100px src=$({user_image[i]})></button>'

                        $('#rsp_user').append(temp_html)



                    }
                }
            })
        }

        //db(rsp_com)에서 image와 넘버 번호를 가져온다
        function listing_com() {
            //$('#cards-box').empty()
            $.ajax({
                type: 'GET',
                url: '/rsp/random',
                data: {},
                success: function (response) {
                    let rows = response['rsp_rand']

                    let image = rows['img']
                    let num_com = rows['num_com']
                    $('#ComImg').src = image

                }
            })
        }

        let date = new Date();
<<<<<<< HEAD

=======
let temp_html=`
        <button onclick="answer(${num_user[0]})" type="button"><img width=100px; src=$({user_image[0]})></button>`
>>>>>>> 0c43b4794e7d6210b360a4119b86e525b7589219
    </script>

</head>

<<<<<<< HEAD
<body>
<!--    배경-->
<div class="back">
    <!--        컴퓨터-->
    <div class="Computer" >
        <img id="ComImg" width="300" src="https://ifh.cc/g/mtGs0O.png."/>
    </div>

    <!--        유저-->
    <div class="user" id="rsp_user">
        <div>
            // <button onclick="answer(${num_user[0]})" type="button"><img width=100px src=$({user_image[0]})></button>
            //<button onclick="answer(${num_user[1]})" type="button"><img width=100px src=$({user_image[0]})></button>
            //<button onclick="answer(${num_user[2]})" type="button"><img width=100px src=$({user_image[0]})></button>
=======
    <body>
        <div class="start">
            <button onclick="open_game()" id="hide" type="button" class="btn btn-outline-danger">게임 시작하기!</button>
>>>>>>> 0c43b4794e7d6210b360a4119b86e525b7589219
        </div>

        <!--    배경-->

        <div class="back" id="game-box">
            <!--        컴퓨터-->
            <!--유저와 컴퓨터의 아이템이 back 밖으로 나가지 않도록 설정-->
            <div class="playgame">
                <div class="Computer">
                    <img id="ComImg" width="100%" src="https://ifh.cc/g/mtGs0O.png."/>
                </div>

                <!--        유저-->
                <div class="user" id="rsp_user">
                    <div>
                        <button onclick="answer(${num_user[0]})" type="button"><img width=100px src=$({user_image[0]})>
                        </button>
                        <button onclick="answer(${num_user[1]})" type="button"><img width=100px src=$({user_image[0]})>
                        </button>
                        <button onclick="answer(${num_user[2]})" type="button"><img width=100px src=$({user_image[0]})>
                        </button>
                    </div>
                    <!--max-width=150px-->
                    <h1 class="msg" id="Usertext"> 이겼다 </h1>
                </div>
            </div>
        </div>

        <!--    https://ifh.cc/g/mtGs0O.png 가위-->
        <!--https://ifh.cc/g/1Y0LPy.png 바위-->
        <!--https://ifh.cc/g/Qqw7Qa.png 보-->


        =======
        <button type="button" class="btn btn-dark" onclick="rs_delete()">기록 초기화</button>

        <table class="table" id="game-box2">
            <thead>
            <tr>
                <td>회차</td>
                <td>내가 낸 것</td>
                <td>컴퓨터가 낸 것</td>
                <td class="WinLose">결과</td>
            </tr>
            <tbody id="history-box">
            <!-- 여기에 temp_html 이 붙음 -->
            </tbody>
            </thead>
        </table>

    </body>
</html>